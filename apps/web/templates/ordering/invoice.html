{% extends "ordering/base.html" %}

{% block title %}{{ vm.title }} Â· NYC DOE Ordering{% endblock %}

{% block header %}
<header class="header">
  <div class="row">
    <div>
      <p class="kicker">NYC DOE Ordering</p>
      <h1 class="headline">{{ vm.title }}</h1>
    </div>
    <a href="/ordering/cart" class="button">Return to cart</a>
  </div>
  <p class="subhead">Signed in as {{ vm.employee_email }}</p>
</header>
{% endblock %}

{% block content %}
<section class="card stack">
  {% if let Some(message) = vm.message %}
  <p class="notice">{{ message }}</p>
  {% endif %}
  {% if let Some(error) = vm.error %}
  <p class="alert">{{ error }}</p>
  {% endif %}

  {% if let Some(invoice) = vm.invoice %}
  <div class="row">
    <div>
      <p class="kicker">Quote number</p>
      <p style="font-size: 22px; font-weight: 600; margin: 6px 0;">{{ invoice.quote_number }}</p>
    </div>
    <div class="muted" style="font-size: 12px;">Sent to {{ invoice.recipient }}</div>
  </div>
  <p class="muted">School: {{ invoice.school }}</p>

  <ul class="list">
    {% for item in invoice.line_items %}
    <li class="list-item">
      <div>{{ item.description }}</div>
      <div class="muted" style="margin-top: 8px; display: flex; justify-content: space-between;">
        <span>{{ item.quantity }} @ {{ item.price }}</span>
        <span>{{ item.line_total }}</span>
      </div>
    </li>
    {% endfor %}
  </ul>

  <div class="stack" style="gap: 8px;">
    <div class="total-row"><span>Subtotal</span><span>{{ invoice.subtotal }}</span></div>
    <div class="total-row"><span>Tax</span><span>{{ invoice.tax }}</span></div>
    <div class="total-row"><span>Shipping</span><span>{{ invoice.shipping }}</span></div>
    <div class="total-row"><strong>Total</strong><strong>{{ invoice.total }}</strong></div>
  </div>

  <p class="muted">Delivery window: {{ invoice.delivery_window }}</p>
  {% endif %}
</section>
{% endblock %}
